{% extends 'cp_nigeria/steps/step_progression.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load i18n %}


{% block start_body_scripts %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
	const postUrl = `{% url 'ajax_usergroup_form' %}`;
	const csrfToken = `{{ csrf_token }}`;
    const dropdownUrl = `{% url 'ajax_load_facilities' %}`;
    // delete item on delete button click

    const urlDeleteUserGroup = `{% url 'delete_usergroup' scen_id %}`;
    const deleteUserGroup = (event) => {
        //submit the form to delete a report item
        const userGroupId = event.target.closest('div').id
        if(confirm("Are you sure ? This action cannot be undone")){
            $.ajax({
                headers: {'X-CSRFToken': `{{ csrf_token }}` },
                type: "POST",
                url: urlDeleteUserGroup,
                data: {user_group_id: userGroupId},
                success: function (jsonRes) {
                    document.getElementById(userGroupId).remove();
                },
                error: function (err) {
                    console.log(err);
                },
            })
        }
    };
</script>
<script src="{% static 'js/user_groups.js' %}"></script>
<script src="{% static 'js/dependent_dropdown.js' %}"></script>

{% endblock start_body_scripts %}
<!-- WRITE HTML CODE WITHIN THESE block content TAGS -->

{% block progression_content %}
<main>

    <script>
    function displayForm(form_id) {
          const elem = document.getElementById(form_id);
          elem.style.display = 'block';
    }
    function setImage(select, curve_name){
      var image = document.getElementsByName(curve_name)[0];
      image.src = select.options[select.selectedIndex].value;
    }
    $( "button" ).click(function() {
    $( this ).toggleClass( "hidden" );
    });
    </script>


    <div class="grid-container">
        <div class="text">{% translate "Input community demand parameters:" %}</div>
        <button class="btn btn--medium btn--short" type="button" onclick="javascript:adduserGroupDivToDOM();">Add Household Group</button>
    </div>
		<div id="demand-aggregate">

		</div>
    <div class="grid-container" id="ug_container">

    </div>
    <center>
        <button class="btn btn--medium" type="button">{% translate "Generate load profile" %}</button>
        <button class="btn btn--medium" type="button">{% translate "Upload load profile" %}</button>
    </center>
</main>

{% endblock progression_content %}

{% block end_body_scripts %}
{% endblock end_body_scripts %}








