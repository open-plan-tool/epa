{% load custom_filters %}
{% load crispy_forms_tags %}
{% load static %}
{% load i18n %}
{% load custom_template_tags %}

{% csrf_token %}
<div class="container accordion" id="accordionQuestions">
	{% for cat in categories %}
	<div class="row align-items-start accordion-item">
		<h3 class="accordion-header" id="heading-{{ forloop.counter }}">
			<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse-{{ forloop.counter }}">
				{{ cat }}
			</button>
		</h3>

		<div id="collapse-{{ forloop.counter }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" aria-labelledby="heading-{{ forloop.counter }}" data-bs-parent="#accordionQuestions">
			<div class="accordion-body">
				{% for field in form %}
				{% if field.name|get_category:categories_map|is_current_category:cat %}
				<div class="form-group{% if field.errors %} invalid{% endif %}">
					{{ field|as_crispy_field }}
				</div>
				{% endif %}
				{% endfor %}
			</div>
		</div>

	</div>
	{% endfor %}

	<input id="helpSelectBMModalSubmitBtn" style="display:none" type="submit">

</div>
